---
import "../styles/tailwind.css";
import AdBanner from "../components/AdBanner.astro";
const { title = 'CalcSimpler', description = 'Smart & Fast Calculators', canonical } = Astro.props;
const site = Astro.site?.toString() || (import.meta.env.SITE_URL ?? 'https://example.com');
const href = canonical ?? new URL(Astro.url.pathname, site).toString();
const adsClient = import.meta.env.VITE_ADSENSE_CLIENT;
const cfToken = import.meta.env.VITE_CF_ANALYTICS_TOKEN;
---
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{title ? `${title} — CalcSimpler.com` : 'CalcSimpler.com'}</title>
    <meta name="description" content={description} />
    <link rel="canonical" href={href} />
    <link rel="icon" href="/favicon.svg" type="image/svg+xml">
    <!-- Set the theme colour to match the primary brand colour.
         This provides a consistent browser UI in light mode. -->
    <meta name="theme-color" content="#0057B8">
    <link rel="stylesheet" href="/styles/theme.css">
    <link rel="stylesheet" href="/styles/tokens.css" />
    {adsClient && (
      <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client={adsClient}" crossorigin="anonymous"></script>
    )}
    {cfToken && (
      <script defer src="https://static.cloudflareinsights.com/beacon.min.js" data-cf-beacon={`{"token":"${cfToken}"}`}></script>
    )}
    <meta property="og:type" content="website" />
  <meta property="og:title" content={title} />
  <meta property="og:description" content={description} />
  <meta property="og:url" content={href} />
    <!-- Provide a default Open Graph image.  This uses the site
         favicon as a simple logo.  Replace the path with a custom
         preview image if desired. -->
    <meta property="og:image" content={`${site}/logo.svg`} />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content={title} />
  <meta name="twitter:description" content={description} />
</head>
  <body>
    <a href="#main" style="position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden">Skip to content</a>
    <header class="header" role="banner">
      <div class="container flex items-center justify-between py-4">
        <a href="/" aria-label="CalcSimpler" class="logo mr-2.5">
          <img src="/logo.svg" alt="CalcSimpler" />
        </a>
        <button id="menu-btn" class="sm:hidden p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--accent)]" aria-label="Toggle navigation" aria-expanded="false">
          <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
          </svg>
        </button>
        <nav
          id="nav"
          class="hidden absolute top-full left-0 right-0 mx-4 mt-2 flex flex-col items-end gap-2 bg-[var(--card)] border border-[var(--border)] rounded-md p-4 shadow-md sm:static sm:flex sm:flex-row sm:items-center sm:gap-4 sm:justify-end sm:mx-0 sm:mt-0 sm:border-0 sm:p-0 sm:shadow-none"
          aria-label="Primary"
        >
          <a
            href="/all"
            class={['nav-link', Astro.url.pathname.startsWith('/all') && 'active'].filter(Boolean).join(' ')}
            >All Calculators</a
          >
          <a
            href="/categories/"
            class={['nav-link', Astro.url.pathname.startsWith('/categories') && 'active'].filter(Boolean).join(' ')}
            >Categories</a
          >
          <a
            href="/search"
            class={['nav-link', Astro.url.pathname.startsWith('/search') && 'active'].filter(Boolean).join(' ')}
            >Search</a
          >
          <a
            href="/scientific-calculator/"
            class={['nav-link', 'traditional', Astro.url.pathname.startsWith('/scientific-calculator') && 'active'].filter(Boolean).join(' ')}
            >Scientific Calculator</a
          >
        </nav>
      </div>
    </header>
    <main class="container" id="main" role="main">
      <slot />
      <AdBanner />
    </main>
    <footer class="container" style="padding:24px 0;">
      <div class="links">
        <a href="/">Home</a>
        <a href="/categories/">Categories</a>
        <a href="/all">All Calculators</a>
        <a href="/search">Search</a>
        <a href="/sitemap.xml">Sitemap</a>
        <a href="/privacy">Privacy</a>
        <a href="/disclaimer">Disclaimer</a>
      </div>
      <div style="text-align:center;margin-top:8px;color:var(--muted)">© {new Date().getFullYear()} CalcSimpler.com</div>
    </footer>
    <script is:inline>
      const btn = document.getElementById('menu-btn');
      const nav = document.getElementById('nav');
      btn?.addEventListener('click', () => {
        const expanded = btn.getAttribute('aria-expanded') === 'true';
        btn.setAttribute('aria-expanded', String(!expanded));
        nav.classList.toggle('hidden');
      });
    </script>
  </body>
</html>
