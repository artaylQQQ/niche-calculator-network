---
import BaseLayout from "../layouts/BaseLayout.astro";
import AdBanner from "../components/AdBanner.astro";
// Lists calculators related to lifestyle and travel topics.
// The slug is `lifestyle & travel` and it gathers all MDX files with that cluster.
const slug = "lifestyle & travel";
const title = "Lifestyle & Travel Calculators";
const modules = import.meta.glob("../pages/calculators/*.mdx", { eager: true });
const items = Object.values(modules).map((m) => ({ url: m.url, fm: m.frontmatter || {} }));
const getTitle = (it) => it.fm.title || it.url.replace('/calculators/','').replace('.mdx','');
const list = items
  .filter((i) => (i.fm.cluster || "").toLowerCase() === slug)
  .sort((a, b) => getTitle(a).localeCompare(getTitle(b)));
---
<BaseLayout title={title} description="Browse lifestyle & travel calculators">
    <section class="hero container mx-auto max-w-5xl px-4">
      <h1 style="color: var(--ink)">{title}</h1>
      <p style="color: var(--muted)">Explore calculators in this category.</p>
    </section>
    <AdBanner />
    {list.length === 0 ? (
    <p class="section"><em>No calculators available in this category.</em></p>
  ) : (
    <section class="section container mx-auto max-w-5xl px-4" aria-labelledby={`list-${slug}`}> 
      <h2 id={`list-${slug}`} class="sr-only">Calculators list</h2>
      <!-- Use a responsive Tailwind grid for consistent card sizes across breakpoints -->
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
        {list.map((it) => (
          <div>
            <a class="card" href={it.url}>
              <h3>{it.fm.title || it.url.replace('/calculators/','').replace('.mdx','')}</h3>
              <p>{it.fm.intro || it.fm.description || ''}</p>
            </a>
          </div>
        ))}
      </div>
    </section>
  )}
</BaseLayout>
