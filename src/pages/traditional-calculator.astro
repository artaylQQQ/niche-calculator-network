---
import BaseLayout from '../layouts/BaseLayout.astro';
const keyClass = "p-2 rounded border border-[var(--border)] bg-[var(--surface)] text-[var(--ink)] hover:bg-[var(--neutral-sky)] active:bg-[var(--neutral-warm)] transition-colors font-semibold";
---

<BaseLayout title="Traditional Calculator" description="Perform basic arithmetic operations with this traditional calculator.">
  <div class="max-w-sm mx-auto mt-8">
    <div id="calc" class="card">
      <input
        id="display"
        class="w-full mb-2 p-3 border border-[var(--border)] rounded text-right text-2xl bg-[var(--surface)] text-[var(--ink)]"
        readonly
      />
      <div class="grid grid-cols-4 gap-2">
        <button data-value="7" class={keyClass}>7</button>
        <button data-value="8" class={keyClass}>8</button>
        <button data-value="9" class={keyClass}>9</button>
        <button data-value="/" class={keyClass}>÷</button>
        <button data-value="4" class={keyClass}>4</button>
        <button data-value="5" class={keyClass}>5</button>
        <button data-value="6" class={keyClass}>6</button>
        <button data-value="*" class={keyClass}>×</button>
        <button data-value="1" class={keyClass}>1</button>
        <button data-value="2" class={keyClass}>2</button>
        <button data-value="3" class={keyClass}>3</button>
        <button data-value="-" class={keyClass}>−</button>
        <button data-value="0" class={keyClass}>0</button>
        <button data-value="." class={keyClass}>.</button>
        <button data-value="=" class={keyClass}>=</button>
        <button data-value="+" class={keyClass}>+</button>
        <button data-value="C" class="col-span-4 p-2 rounded border border-[var(--border)] bg-[var(--accent)] text-[var(--primary-ink)] hover:brightness-110 font-semibold">C</button>
      </div>
    </div>
  </div>

  <script>
    const display = document.getElementById('display');
    const buttons = document.querySelectorAll('#calc button');
    let current = '';
    buttons.forEach(btn => {
      btn.addEventListener('click', () => {
        const val = btn.dataset.value;
        if (val === 'C') {
          current = '';
        } else if (val === '=') {
          try {
            current = eval(current).toString();
          } catch {
            current = 'Error';
          }
        } else {
          current += val;
        }
        display.value = current;
      });
    });
  </script>
</BaseLayout>

